Today maybe raining, temp: ${{on.weather.outputs.current[0].temp}}°, ${{on.weather.outputs.daily[0].weather[0]description}}
on:
  weather:
    apiKey: ${{ secrets.OPENWEATHERMAP_API_KEY }}
    params:
      lat: ${{ secrets.LAT }}
      lon: ${{ secrets.LON }}
      units: metric
     #every: "30 6 * * 1-5"
     #timeZone: Europe/Berlin

jobs:
  print:
    name: Print
    runs-on: ubuntu-latest
    steps:
      - name: Print Outputs
        env:
          message: |
            temp: ${{on.weather.outputs.current.temp}}°, ${{on.weather.outputs.daily[0].weather[0].description}}
        run: |
          echo message: $message
      #- name: SIGNL4 Alerting
       # uses: signl4/signl4-action-alert@v1
       # with:
       #   team-secret: ${{ secrets.SIGNL4_TEAM_SECRET }}
        #  title: ${{on.weather.outputs.daily[0].weather[0].description}}
        #  message: Die aktuelle Teperatur beträgt ${{on.weather.outputs.current.temp}}°, der Tageshöchstwert wird bei ${{on.weather.outputs.daily[0].temp.day}}° liegen
      - name: Slack notification
        uses: Ilshidur/action-slack@2.1.0
        env:
          curtemp: ${{on.weather.outputs.current.temp}}
          maxtemp: ${{on.weather.outputs.daily[0].temp.day}}
          summary: ${{on.weather.outputs.daily[0].weather[0].description}}
          SLACK_WEBHOOK: ${{ secrets.SLACK_WEATHER_BOT }}
          SLACK_CUSTOM_PAYLOAD: '{ "text": "Wetterinfo {{ summary }} ", "blocks": [ { "type": "header", "text": { "type": "plain_text", "text": ":thermometer: Wetterinfo {{ summary }} ", "emoji": true } },{ "type": "section", "text": { "type": "mrkdwn", "text": " Aktuelle Temperatur liegt bei {{ curtemp }} °C, die Maximaltemperatur wird bei {{ maxtemp }} °C liegen" } }, { "type": "divider" } ] }'
